!function t(e,r,n){function s(o,a){if(!r[o]){if(!e[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var f=r[o]={exports:{}};e[o][0].call(f.exports,(function(t){return s(e[o][1][t]||t)}),f,f.exports,t,e,r,n)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,r){const n=t("../libs/sys/JavaLibraryScriptCore.js");class s extends n{constructor(t,e,r=t,n=null,s={}){super(),this.name=t,this.ordinal=e,this.value=r,this.owner=n;for(const[t,e]of Object.entries(s))"function"==typeof e&&(this[t]=e.bind(this));Object.freeze(this)}toString(){return this.name}toJSON(){return this.name}compareTo(t){return this.ordinal-t.ordinal}equals(t){return t instanceof s&&this.name===t.name&&this.ordinal===t.ordinal&&this.value===t.value}hashCode(){return this.name.split("").reduce(((t,e)=>t+e.charCodeAt(0)),0)+31*this.ordinal}}class i extends n{constructor(t,e={}){let r;if(super(),this._items=[],this._methods=e.methods||{},Array.isArray(t))r=t.map((t=>Array.isArray(t)?t:[t,t]));else{if("object"!=typeof t||null===t)throw new TypeError("Enum: 配列か連想配列で定義してください");r=Object.entries(t)}r.forEach((([t,e],r)=>{const n=new s(t,r,e,this,this._methods);Object.defineProperty(this,t,{value:n,writable:!1,configurable:!1,enumerable:!0}),this._items.push(n)})),Object.freeze(this._items)}values(){return this._items.slice()}valueOf(t){return this[t]}fromName=valueOf;fromValue(t){return this._items.find((e=>e.value===t))}fromOrdinal(t){return this._items.find((e=>e.ordinal===t))}has(t){return"object"==typeof this[t]&&this[t]instanceof s}entries(){return this._items.map((t=>[t.name,t]))}keys(){return this._items.map((t=>t.name))}toMap(){const t={};for(const e of this._items)t[e.name]=e.value;return t}toJSON(){return this._items.map((t=>t.toJSON()))}*[Symbol.iterator](){yield*this._items}*enumerate(){for(let t=0;t<this._items.length;t++)yield[t,this._items[t]]}}e.exports={_EnumItem:s,_EnumCore:i,Enum:function(t,e={}){const r=new i(t,e);return new Proxy(r,{get(t,e,r){if("string"==typeof e&&/^[0-9]+$/.test(e)){const r=Number(e);return t._items[r]}return Reflect.get(t,e,r)},enumerate:t=>Object.keys(t._items).map((t=>t.toString())),has(t,e){if("string"==typeof e&&/^[0-9]+$/.test(e)){const r=Number(e);return r>=0&&r<t._items.length}return e in t},ownKeys:t=>[...Reflect.ownKeys(t),...t._items.map(((t,e)=>e.toString()))],getOwnPropertyDescriptor:(t,e)=>"string"==typeof e&&/^[0-9]+$/.test(e)?e in t._items?{value:t._items[Number(e)],writable:!1,configurable:!1,enumerable:!0}:void 0:Object.getOwnPropertyDescriptor(t,e),set(t,e,r){throw new TypeError(`Enumは変更できません: ${String(e)} = ${r}`)},defineProperty(t,e,r){throw new TypeError(`Enumにプロパティを追加/変更できません: ${String(e)}`)},deleteProperty(t,e){throw new TypeError(`Enumのプロパティを削除できません: ${String(e)}`)}})}}},{"../libs/sys/JavaLibraryScriptCore.js":7}],2:[function(t,e,r){const n=t("../libs/sys/JavaLibraryScriptCore.js"),s=t("../libs/TypeChecker.js");e.exports=class extends n{static _isDebugMode=!1;static applyTo(t,e={},{inherit:r=!0}={}){if(!this._isDebugMode)return;const n=t.prototype;let i={};if(r){const t=Object.getPrototypeOf(n);t&&t.__interfaceTypes&&(i={...t.__interfaceTypes})}n.__interfaceTypes||Object.defineProperty(n,"__interfaceTypes",{value:{},configurable:!1,writable:!1,enumerable:!1}),Object.assign(n.__interfaceTypes,i,e);for(const e in n.__interfaceTypes){const r=n.__interfaceTypes[e],i=n[e];if("function"!=typeof i)throw new Error(`"${t.name}" はメソッド "${e}" を実装する必要があります`);n[e]=function(...n){const o=r.args||[];for(let r=0;r<o.length;r++)if(!s.matchType(n[r],o[r]))throw new TypeError(`"${t.name}.${e}" 第${r+1}引数: ${s.typeNames(o[r])} を期待 → 実際: ${s.stringify(n[r])}`);const a=i.apply(this,n),c=r.returns,u=s.checkFunction(c)?c(n):c,f=r=>{if(!s.matchType(r,u))throw u===InterfaceTypeChecker.NO_RETURN?new TypeError(`"${t.name}.${e}" は戻り値を返してはいけません → 実際: ${s.stringify(r)}`):new TypeError(`"${t.name}.${e}" の戻り値: ${s.typeNames(u)} を期待 → 実際: ${s.stringify(r)}`);return r};return a instanceof Promise?a.then(f):f(a)}}}}},{"../libs/TypeChecker.js":5,"../libs/sys/JavaLibraryScriptCore.js":7}],3:[function(t,e,r){e.exports={...t("./Enum.js"),Interface:t("./Interface.js")}},{"./Enum.js":1,"./Interface.js":2}],4:[function(t,e,r){e.exports={base:t("./base"),libs:t("./libs"),util:t("./util")}},{"./base":3,"./libs":6,"./util":12}],5:[function(t,e,r){const n=t("../libs/sys/JavaLibraryScriptCore.js"),{_EnumCore:s,_EnumItem:i}=t("../base/Enum.js");class o extends n{static _CLASS_REG=/^\s*class\s+/;static _NotType=class extends n{constructor(t){if(super(),t instanceof o._NotType)throw new TypeError("typeToExclude must be instance of NotType");this.typeToExclude=t}};static NotType(t){return new o._NotType(t)}static Any=Symbol("any");static Void=Symbol("void");static NoReturn=this.Void;static NotNull=this.NotType(null);static NotUndefined=this.NotType(void 0);static matchType(t,e){if(Array.isArray(e)){if(e.filter((t=>t instanceof this._NotType)).some((e=>this.checkType(t,e.typeToExclude))))return!1;const r=e.filter((t=>!(t instanceof this._NotType)));return 0===r.length||r.some((e=>this.checkType(t,e)))}return this.checkType(t,e)}static checkType(t,e){return e instanceof this._NotType?!this.checkType(t,e.typeToExclude):e===this.Any||(e===this.NoReturn?void 0===t:null===e?null===t:void 0===e?void 0===t:e===String||e===Number||e===Boolean||e===Symbol||e===Function||e===BigInt?typeof t===e.name.toLowerCase():e===Object?"object"==typeof t&&null!==t&&!Array.isArray(t):e===Array?Array.isArray(t):e instanceof s?e.has(t?.name):e===i?t instanceof i:"function"==typeof e&&t instanceof e)}static typeNames(t){return Array.isArray(t)?t.map((t=>t?.name||o.stringify(t))).join(" | "):t?.name||o.stringify(t)}static stringify(t){if(null==t)return String(t);if("object"==typeof t){if("[object Object]"!==t?.toString())return String(t);if(t instanceof this._NotType)return`NotType(${o.stringify(t.typeToExclude)})`;try{const e=JSON.stringify(t,((t,e)=>{if(e&&"object"==typeof e){const t=Object.keys(e).length;if(t>5)return`Object with ${t} properties`}return e}),0);return void 0===e?"Object is too large to display or contains circular references":e.length>1e3?"Object is too large to display":e}catch(t){return`[オブジェクト表示エラー: ${t.message}]`}}return String(t)}static checkFunction(t){return"function"==typeof t&&!this.checkClass(t)}static checkClass(t){if("function"!=typeof t)return!1;if(this._CLASS_REG.test(t.toString()))return!0;if(t===Function)return!0;try{return new new Proxy(t,{construct:()=>({})}),!0}catch{return!1}}}e.exports=o},{"../base/Enum.js":1,"../libs/sys/JavaLibraryScriptCore.js":7}],6:[function(t,e,r){e.exports={TypeChecker:t("./TypeChecker.js"),sys:t("./sys")}},{"./TypeChecker.js":5,"./sys":8}],7:[function(t,e,r){const n=Symbol.for("JavaLibraryScript");e.exports=class{static[n]=!0}},{}],8:[function(t,e,r){e.exports={JavaLibraryScriptCore:t("./JavaLibraryScriptCore.js")}},{"./JavaLibraryScriptCore.js":7}],9:[function(t,e,r){const n=t("./index.js");"undefined"!=typeof window&&(window.JavaLibraryScript=n),e.exports=n},{"./index.js":4}],10:[function(t,e,r){const n=t("../base/Interface"),s=t("../libs/TypeChecker"),i=s.Any,o=s.NoReturn,a=[s.NotNull,s.NotUndefined];class c extends Map{constructor(t,e){if(super(),new.target===c)throw new TypeError("Cannot instantiate abstract class BaseMap");this._KeyType=t,this._ValueType=e}_checkKey(t){if(!s.matchType(t,this._KeyType))throw new TypeError(`キー型が一致しません。期待: ${this._KeyType.name} → 実際: ${s.stringify(t)}`)}_checkValue(t){if(!s.matchType(t,this._ValueType))throw new TypeError(`値型が一致しません。期待: ${this._ValueType.name} → 実際: ${s.stringify(t)}`)}}n.applyTo(c,{set:{args:[a,a],returns:i},put:{args:[a,a],returns:i},get:{args:[a],returns:i},delete:{args:[a],returns:Boolean},remove:{args:[a],returns:Boolean},isEmpty:{returns:Boolean},clear:{returns:o},has:{args:[a],returns:Boolean},containsKey:{args:[a],returns:Boolean},containsValue:{args:[a],returns:Boolean}}),e.exports=c},{"../base/Interface":2,"../libs/TypeChecker":5}],11:[function(t,e,r){const n=t("./BaseMap"),s=t("../base/Interface"),i=t("./stream/EntryStream.js");class o extends n{constructor(t,e){super(t,e)}set(t,e){return this._checkKey(t),this._checkValue(e),super.set(t,e)}put(t,e){return this.set(t,e)}setAll(t){for(const[e,r]of t.entries())this.set(e,r)}putAll(t){return this.setAll(t)}get(t){return this._checkKey(t),super.get(t)}has(t){return this._checkKey(t),super.has(t)}containsKey(t){return this.has(t)}containsValue(t){for(const e of super.values())if(e===t)return!0;return!1}delete(t){return this._checkKey(t),super.delete(t)}remove(t){return this.delete(t)}entrySet(){return this.entries()}isEmpty(){return 0===super.size}equals(t){if(this.size!==t.size)return!1;for(const[e,r]of this.entries())if(!t.has(e)||t.get(e)!==r)return!1;return!0}forEach(t,e){for(const[r,n]of this.entries())t.call(e,n,r,this)}stream(){return i.from(this.entries())}toString(){return`{ ${Array.from(this.entries()).map((([t,e])=>`${t}=${e}`)).join(", ")} }`}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}}s.applyTo(o),e.exports=o},{"../base/Interface":2,"./BaseMap":10,"./stream/EntryStream.js":14}],12:[function(t,e,r){e.exports={BaseMap:t("./BaseMap.js"),HashMap:t("./HashMap.js"),stream:t("./stream")}},{"./BaseMap.js":10,"./HashMap.js":11,"./stream":19}],13:[function(t,e,r){const n=t("./StreamInterface.js"),s=t("./Stream.js");class i extends n{constructor(t){super(),this._iter=i._normalize(t),this._pipeline=[]}static from(t){return new i(t)}static _normalize(t){if("function"==typeof t[Symbol.asyncIterator])return t;if("function"==typeof t[Symbol.iterator])return async function*(){for(const e of t)yield e}();throw new TypeError("not (Async)Iterable")}_use(t){return this._pipeline.push(t),this}flattenPipeline(){const t=this._pipeline.reduceRight(((t,e)=>async function*(r){yield*e(t(r))}),(async function*(t){yield*t})),e=new this.constructor([]);return e._iter=this._iter,e._pipeline=[t],e}toFunction(){const t=this.flattenPipeline()._pipeline[0];return e=>t(e)}map(t){return this._use((async function*(e){for await(const r of e)yield await t(r)}))}filter(t){return this._use((async function*(e){for await(const r of e)await t(r)&&(yield r)}))}flatMap(t){return this._use((async function*(e){for await(const r of e){const e=await t(r);for await(const t of i._normalize(e))yield t}}))}distinct(t=t=>t){return this._use((async function*(e){const r=new Set;for await(const n of e){const e=await t(n);r.has(e)||(r.add(e),yield n)}}))}limit(t){return this._use((async function*(e){let r=0;for await(const n of e){if(!(r++<t))break;yield n}}))}skip(t){return this._use((async function*(e){let r=0;for await(const n of e)r++>=t&&(yield n)}))}[Symbol.asyncIterator](){let t=this._iter;for(const e of this._pipeline)t=e(t);return t[Symbol.asyncIterator]()}async forEach(t){for await(const e of this)await t(e)}async toArray(){const t=[];for await(const e of this)t.push(e);return t}async reduce(t,e){let r=e;for await(const e of this)r=await t(r,e);return r}count(){return this.reduce((t=>t+1),0)}toLazy(){return new Promise((async t=>{const e=[];for await(const t of this)e.push(t);t(new s(e))}))}}e.exports=i},{"./Stream.js":16,"./StreamInterface.js":17}],14:[function(t,e,r){const n=t("./Stream.js");let s;e.exports=class extends n{constructor(t){super(t),this.mapToEntry=void 0}keys(){return this._convertToX(n).map((([t,e])=>t))}values(){return this._convertToX(n).map((([t,e])=>e))}mapKeys(t){return this.map((([e,r])=>[t(e),r]))}mapValues(t){return this.map((([e,r])=>[e,t(r)]))}toHashMap(e,r){s||(s=t("../HashMap.js"));const n=new s(e,r);return this.forEach((([t,e])=>n.set(t,e))),n}}},{"../HashMap.js":11,"./Stream.js":16}],15:[function(t,e,r){const n=t("./Stream.js");e.exports=class extends n{constructor(t){super(t),this.mapToNumber=void 0}sum(){let t=0;for(const e of this)t+=e;return t}average(){let t=0,e=0;for(const r of this)t+=r,e++;return 0===e?NaN:t/e}min(){let t=1/0;for(const e of this)e<t&&(t=e);return t===1/0?void 0:t}max(){let t=-1/0;for(const e of this)e>t&&(t=e);return t===-1/0?void 0:t}}},{"./Stream.js":16}],16:[function(t,e,r){const n=t("./StreamInterface.js");let s,i,o,a;class c extends n{constructor(e){super(),this._iter=e[Symbol.iterator](),this._pipeline=[],s||(s=t("./NumberStream.js"),i=t("./StringStream.js"),o=t("./EntryStream.js"),a=t("./AsyncStream.js"))}static from(t){return new this(t)}_use(t){return this._pipeline.push(t),this}_convertToX(t,e){const r=new t([]);return r._iter=this._iter,r._pipeline=[...this._pipeline],e&&r._pipeline.push(e),r}flattenPipeline(){const t=this._pipeline.reduceRight(((t,e)=>function*(r){yield*e(t(r))}),(t=>t)),e=new this.constructor([]);return e._iter=this._iter,e._pipeline=[t],e}toFunction(){const t=this.flattenPipeline()._pipeline[0];return e=>t(e)}map(t){return this._use((function*(e){for(const r of e)yield t(r)}))}filter(t){return this._use((function*(e){for(const r of e)t(r)&&(yield r)}))}flatMap(t){return this._use((function*(e){for(const r of e){const e=t(r);yield*e instanceof n?e:e[Symbol.iterator]()}}))}distinct(){return this._use((function*(t){const e=new Set;for(const r of t){const t=JSON.stringify(r);e.has(t)||(e.add(t),yield r)}}))}sorted(t=(t,e)=>t>e?1:t<e?-1:0){return this._use((function*(e){const r=[...e].sort(t);yield*r}))}peek(t){return this._use((function*(e){for(const r of e)t(r),yield r}))}limit(t){return this._use((function*(e){let r=0;for(const n of e){if(r++>=t)break;yield n}}))}skip(t){return this._use((function*(e){let r=0;for(const n of e)r++<t||(yield n)}))}chunk(t){return this._use((function*(e){let r=[];for(const n of e)r.push(n),r.length===t&&(yield r,r=[]);r.length&&(yield r)}))}windowed(t,e=t){return this._use((function*(r){const n=[];for(const s of r)n.push(s),n.length===t&&(yield n.slice(),n.splice(0,e))}))}[Symbol.iterator](){return this._pipeline.reduce(((t,e)=>e(t)),this._iter)}[Symbol.asyncIterator](){let t=this._pipeline.reduce(((t,e)=>e(t)),this._iter);return{next:async()=>Promise.resolve(t.next())}}forEach(t){for(const e of this)t(e)}toArray(){return Array.from(this)}reduce(t,e){let r=e;for(const e of this)r=t(r,e);return r}count(){let t=0;for(const e of this)t++;return t}anyMatch(t){for(const e of this)if(t(e))return!0;return!1}allMatch(t){for(const e of this)if(!t(e))return!1;return!0}noneMatch(t){for(const e of this)if(t(e))return!1;return!0}findFirst(){for(const t of this)return t}findAny(){return this.findFirst()}collectWith(t){return t(this)}mapToNumber(t){return this._convertToX(s,(function*(e){for(const r of e){const e=t(r);if("number"!=typeof e)throw new TypeError("mapToNumber() must return number. Got "+typeof e);yield e}}))}mapToString(t){return this._convertToX(i,(function*(e){for(const r of e){const e=t(r);if("string"!=typeof e)throw new TypeError("mapToString() must return string. Got "+typeof e);yield e}}))}mapToEntry(t){return this._convertToX(o,(function*(e){for(const r of e){const e=t(r);if(!Array.isArray(e)||2!==e.length)throw new TypeError(`mapToEntry() must return [key, value] pair. Got: ${e}`);yield e}}))}mapToAsync(t){const e=this.flattenPipeline(),r=e._pipeline[0](e._iter),n=async function*(){for(const e of r)yield await t(e)}();return new a(n)}}e.exports=c},{"./AsyncStream.js":13,"./EntryStream.js":14,"./NumberStream.js":15,"./StreamInterface.js":17,"./StringStream.js":18}],17:[function(t,e,r){const n=t("../../libs/sys/JavaLibraryScriptCore.js");class s extends n{static methodTypes={map:{args:[Function],returns:s},filter:{args:[Function],returns:s},flatMap:{args:[Function],returns:s},forEach:{args:[[Function,Promise]],returns:[void 0,Promise]}};constructor(){if(super(),new.target===s)throw new TypeError("Cannot instantiate abstract class StreamInterface")}}e.exports=s},{"../../libs/sys/JavaLibraryScriptCore.js":7}],18:[function(t,e,r){const n=t("./Stream.js");e.exports=class extends n{constructor(t){super(t),this.mapToString=void 0}join(t=""){return Array.from(this).join(t)}concatAll(){return this.join("")}longest(){let t="";for(const e of this){if("string"!=typeof e)throw new TypeError("All elements must be strings");e.length>t.length&&(t=e)}return t||void 0}shortest(){let t=null;for(const e of this){if("string"!=typeof e)throw new TypeError("All elements must be strings");(null===t||e.length<t.length)&&(t=e)}return t||void 0}}},{"./Stream.js":16}],19:[function(t,e,r){e.exports={AsyncStream:t("./AsyncStream.js"),EntryStream:t("./EntryStream.js"),NumberStream:t("./NumberStream.js"),Stream:t("./Stream.js"),StreamInterface:t("./StreamInterface.js"),StringStream:t("./StringStream.js")}},{"./AsyncStream.js":13,"./EntryStream.js":14,"./NumberStream.js":15,"./Stream.js":16,"./StreamInterface.js":17,"./StringStream.js":18}]},{},[9]);
//# sourceMappingURL=JavaLibraryScript.min.js.map