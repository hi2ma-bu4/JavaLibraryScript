!function t(e,r,s){function n(o,a){if(!r[o]){if(!e[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[o]={exports:{}};e[o][0].call(h.exports,(function(t){return n(e[o][1][t]||t)}),h,h.exports,t,e,r,s)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,e,r){const s=t("../libs/sys/JavaLibraryScriptCore.js");class n extends s{constructor(t,e,r=t,s=null,n={}){super(),this.name=t,this.ordinal=e,this.value=r,this.owner=s;for(const[t,e]of Object.entries(n))"function"==typeof e&&(this[t]=e.bind(this));Object.freeze(this)}toString(){return this.name}toJSON(){return this.name}compareTo(t){return this.ordinal-t.ordinal}equals(t){return t instanceof n&&this.name===t.name&&this.ordinal===t.ordinal&&this.value===t.value}hashCode(){return this.name.split("").reduce(((t,e)=>t+e.charCodeAt(0)),0)+31*this.ordinal}}class i extends s{constructor(t,e={}){let r;if(super(),this._items=[],this._methods=e.methods||{},Array.isArray(t))r=t.map((t=>Array.isArray(t)?t:[t,t]));else{if("object"!=typeof t||null===t)throw new TypeError("Enum: 配列か連想配列で定義してください");r=Object.entries(t)}r.forEach((([t,e],r)=>{const s=new n(t,r,e,this,this._methods);Object.defineProperty(this,t,{value:s,writable:!1,configurable:!1,enumerable:!0}),this._items.push(s)})),Object.freeze(this._items)}values(){return this._items.slice()}valueOf(t){return this[t]}fromName=valueOf;fromValue(t){return this._items.find((e=>e.value===t))}fromOrdinal(t){return this._items.find((e=>e.ordinal===t))}has(t){return"object"==typeof this[t]&&this[t]instanceof n}entries(){return this._items.map((t=>[t.name,t]))}keys(){return this._items.map((t=>t.name))}toMap(){const t={};for(const e of this._items)t[e.name]=e.value;return t}toJSON(){return this._items.map((t=>t.toJSON()))}*[Symbol.iterator](){yield*this._items}*enumerate(){for(let t=0;t<this._items.length;t++)yield[t,this._items[t]]}}e.exports={_EnumItem:n,_EnumCore:i,Enum:function(t,e={}){const r=new i(t,e);return new Proxy(r,{get(t,e,r){if("string"==typeof e&&/^[0-9]+$/.test(e)){const r=Number(e);return t._items[r]}return Reflect.get(t,e,r)},enumerate:t=>Object.keys(t._items).map((t=>t.toString())),has(t,e){if("string"==typeof e&&/^[0-9]+$/.test(e)){const r=Number(e);return r>=0&&r<t._items.length}return e in t},ownKeys:t=>[...Reflect.ownKeys(t),...t._items.map(((t,e)=>e.toString()))],getOwnPropertyDescriptor:(t,e)=>"string"==typeof e&&/^[0-9]+$/.test(e)?e in t._items?{value:t._items[Number(e)],writable:!1,configurable:!1,enumerable:!0}:void 0:Object.getOwnPropertyDescriptor(t,e),set(t,e,r){throw new TypeError(`Enumは変更できません: ${String(e)} = ${r}`)},defineProperty(t,e,r){throw new TypeError(`Enumにプロパティを追加/変更できません: ${String(e)}`)},deleteProperty(t,e){throw new TypeError(`Enumのプロパティを削除できません: ${String(e)}`)}})}}},{"../libs/sys/JavaLibraryScriptCore.js":7}],2:[function(t,e,r){const s=t("../libs/sys/JavaLibraryScriptCore.js"),n=t("../libs/TypeChecker.js");class i extends s{static _isDebugMode=!1;static methodTypes={};constructor(){if(super(),new.target===i)throw new Error("Interfaceは直接インスタンス化できません。継承して使ってください。");if(!i._isDebugMode)return;const t=this.constructor,e=t.methodTypes||{};for(const r in e){const s=e[r];if("function"!=typeof this[r])throw new Error(`"${t.name}" はメソッド "${r}" を実装する必要があります`);const i=this[r].bind(this);this[r]=(...e)=>{const o=s.args||[];for(let s=0;s<o.length;s++)if(!n.matchType(e[s],o[s]))throw new TypeError(`"${t.name}.${r}" 第${s+1}引数: ${n.typeNames(o[s])} を期待 → 実際: ${n.stringify(e[s])}`);const a=i(...e),c=s.returns,u=n.checkFunction(c)?c(e):c,h=e=>{if(!n.matchType(e,u))throw new TypeError(`"${t.name}.${r}" の戻り値: ${n.typeNames(u)} を期待 → 実際: ${n.stringify(e)}`);return e};return a instanceof Promise?a.then(h):h(a)}}}}e.exports=i},{"../libs/TypeChecker.js":5,"../libs/sys/JavaLibraryScriptCore.js":7}],3:[function(t,e,r){e.exports={...t("./Enum.js"),Interface:t("./Interface.js")}},{"./Enum.js":1,"./Interface.js":2}],4:[function(t,e,r){e.exports={base:t("./base"),libs:t("./libs"),util:t("./util")}},{"./base":3,"./libs":6,"./util":14}],5:[function(t,e,r){const s=t("../libs/sys/JavaLibraryScriptCore.js"),{_EnumCore:n,_EnumItem:i}=t("../base/Enum.js");class o extends s{static _CLASS_REG=/^\s*class\s+/;static _NotType=class extends s{constructor(t){if(super(),t instanceof o._NotType)throw new TypeError("typeToExclude must be instance of NotType");this.typeToExclude=t}};static NotType(t){return new o._NotType(t)}static Any=Symbol("any");static Void=Symbol("void");static NoReturn=this.Void;static NotNull=this.NotType(null);static NotUndefined=this.NotType(void 0);static matchType(t,e){if(Array.isArray(e)){if(e.filter((t=>t instanceof this._NotType)).some((e=>this.checkType(t,e.typeToExclude))))return!1;const r=e.filter((t=>!(t instanceof this._NotType)));return 0===r.length||r.some((e=>this.checkType(t,e)))}return this.checkType(t,e)}static checkType(t,e){return e instanceof this._NotType?!this.checkType(t,e.typeToExclude):e===this.Any||(e===this.NoReturn?void 0===t:null===e?null===t:void 0===e?void 0===t:e===String||e===Number||e===Boolean||e===Symbol||e===Function||e===BigInt?typeof t===e.name.toLowerCase():e===Object?"object"==typeof t&&null!==t&&!Array.isArray(t):e===Array?Array.isArray(t):e instanceof n?e.has(t?.name):e===i?t instanceof i:"function"==typeof e&&t instanceof e)}static typeNames(t){return Array.isArray(t)?t.map((t=>t?.name||o.stringify(t))).join(" | "):t?.name||o.stringify(t)}static stringify(t){if(null==t)return String(t);if("object"==typeof t){if("[object Object]"!==t?.toString())return String(t);if(t instanceof this._NotType)return`NotType(${o.stringify(t.typeToExclude)})`;try{const e=JSON.stringify(t,((t,e)=>{if(e&&"object"==typeof e){const t=Object.keys(e).length;if(t>5)return`Object with ${t} properties`}return e}),0);return void 0===e?"Object is too large to display or contains circular references":e.length>1e3?"Object is too large to display":e}catch(t){return`[オブジェクト表示エラー: ${t.message}]`}}return String(t)}static checkFunction(t){return"function"==typeof t&&!this.checkClass(t)}static checkClass(t){if("function"!=typeof t)return!1;if(this._CLASS_REG.test(t.toString()))return!0;if(t===Function)return!0;try{return new new Proxy(t,{construct:()=>({})}),!0}catch{return!1}}}e.exports=o},{"../base/Enum.js":1,"../libs/sys/JavaLibraryScriptCore.js":7}],6:[function(t,e,r){e.exports={TypeChecker:t("./TypeChecker.js"),sys:t("./sys")}},{"./TypeChecker.js":5,"./sys":8}],7:[function(t,e,r){const s=Symbol("JavaLibraryScript");e.exports=class{static[s]=!0}},{}],8:[function(t,e,r){e.exports={JavaLibraryScriptCore:t("./JavaLibraryScriptCore.js")}},{"./JavaLibraryScriptCore.js":7}],9:[function(t,e,r){const s=t("./index.js");"undefined"!=typeof window&&(window.JavaLibraryScript=s),e.exports=s},{"./index.js":4}],10:[function(t,e,r){const s=t("../base/Interface"),n=t("../libs/TypeChecker"),i=n.Any,o=n.NoReturn,a=[n.NotNull,n.NotUndefined];class c extends s{static methodTypes={put:{args:[a,a],returns:o},get:{args:[a],returns:i},remove:{args:[a],returns:Boolean},size:{returns:Number},isEmpty:{returns:Boolean},clear:{returns:o},containsKey:{args:[a],returns:Boolean},containsValue:{args:[a],returns:Boolean},keys:{returns:Array},values:{returns:Array},entrySet:{returns:Array}};constructor(t,e){if(super(),new.target===c)throw new TypeError("Cannot instantiate abstract class BaseMap");this.KeyType=t,this.ValueType=e}_checkKey(t){if(!n.matchType(t,this.KeyType))throw new TypeError(`キー型が一致しません。期待: ${this.KeyType.name} → 実際: ${n.stringify(t)}`)}_checkValue(t){if(!n.matchType(t,this.ValueType))throw new TypeError(`値型が一致しません。期待: ${this.ValueType.name} → 実際: ${n.stringify(t)}`)}}e.exports=c},{"../base/Interface":2,"../libs/TypeChecker":5}],11:[function(t,e,r){const s=t("./BaseMap");class n extends s{constructor(t,e){super(t,e),this._data=new Map}put(t,e){this._checkKey(t),this._checkValue(e),this._data.set(t,e)}putAll(t){for(const[e,r]of t.entries())this.set(e,r)}get(t){if(this._checkKey(t),this._map.has(t))return this._data.get(t)}containsKey(t){return this._checkKey(t),this._data.has(t)}containsValue(t){for(const e of this.values())if(e===t)return!0;return!1}remove(t){return this._checkKey(t),this._data.delete(t)}size(){return this._data.size}isEmpty(){return 0===this._data.size}clear(){this._data.clear()}containsKey(t){return this._checkKey(t),this._data.has(t)}containsValue(t){for(const e of this._data.values())if(e===t)return!0;return!1}keys(){return Array.from(this._data.keys())}values(){return Array.from(this._data.values())}entrySet(){return Array.from(this._data.entries())}equals(t){if(this.size!==t.size)return!1;for(const[e,r]of this.entries())if(!t.has(e)||t.get(e)!==r)return!1;return!0}forEach(t,e){for(const[r,s]of this._data.entries())t.call(e,s,r,this)}toString(){return`{ ${Array.from(this.entries()).map((([t,e])=>`${t}=${e}`)).join(", ")} }`}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}}e.exports=n},{"./BaseMap":10}],12:[function(t,e,r){const s=t("./HashMap");e.exports=class extends s{constructor(t,e,{accessOrder:r=!1}={}){super(t,e),this._accessOrder=r}put(t,e){this._checkKey(t),this._checkValue(e),this._accessOrder&&this._data.has(t)&&this._data.delete(t),super.put(t,e)}get(t){const e=super.get(t);return this._accessOrder&&void 0!==e&&(this._data.delete(t),this._data.set(t,e)),e}}},{"./HashMap":11}],13:[function(t,e,r){const s=t("./HashMap");class n extends s{static defaultCompare(t,e){if("number"==typeof t&&"number"==typeof e)return t-e;if("string"==typeof t&&"string"==typeof e)return t.localeCompare(e);const r=String(t),s=String(e);return r>s?1:r<s?-1:0}static compareByProp(t,e=n.defaultCompare){return(r,s)=>e(r[t],s[t])}constructor(t,e,r=n.defaultCompare){super(t,e),this._compare=r,this._sortedKeys=null}_invalidateSortedKeys(){this._sortedKeys=null}_getSortedKeys(){return this._sortedKeys||(this._sortedKeys=Array.from(this.keys()).sort(this._compare)),this._sortedKeys}put(t,e){const r=this._data.has(t);super.put(t,e),r||this._invalidateSortedKeys()}remove(t){const e=super.remove(t);return e&&this._invalidateSortedKeys(),e}clear(){super.clear(),this._invalidateSortedKeys()}keys(){return this._getSortedKeys().slice()}values(){return this._getSortedKeys().map((t=>this._data.get(t)))}entrySet(){return this._getSortedKeys().map((t=>[t,this._data.get(t)]))}firstKey(){const t=this._getSortedKeys();return t.length>0?t[0]:void 0}lastKey(){const t=this._getSortedKeys();return t.length>0?t[t.length-1]:void 0}ceilingKey(t){return this._getSortedKeys().find((e=>this._compare(e,t)>=0))}floorKey(t){const e=this._getSortedKeys();for(let r=e.length-1;r>=0;r--)if(this._compare(e[r],t)<=0)return e[r]}headMap(t){const e=new n;for(const r of this._getSortedKeys()){if(this._compare(r,t)>=0)break;e.set(r,this.get(r))}return e}tailMap(t){const e=new n;for(const r of this._getSortedKeys())this._compare(r,t)>=0&&e.set(r,this.get(r));return e}subMap(t,e){const r=new n;for(const s of this._getSortedKeys()){if(this._compare(s,e)>=0)break;this._compare(s,t)>=0&&r.set(s,this.get(s))}return r}forEach(t,e){for(const r of this._getSortedKeys())t.call(e,this._map.get(r),r,this)}}e.exports=n},{"./HashMap":11}],14:[function(t,e,r){e.exports={BaseMap:t("./BaseMap.js"),HashMap:t("./HashMap.js"),LinkedHashMap:t("./LinkedHashMap.js"),TreeMap:t("./TreeMap.js"),stream:t("./stream")}},{"./BaseMap.js":10,"./HashMap.js":11,"./LinkedHashMap.js":12,"./TreeMap.js":13,"./stream":21}],15:[function(t,e,r){const s=t("./StreamInterface.js"),n=t("./Stream.js");class i extends s{constructor(t){super(),this._iter=i._normalize(t),this._pipeline=[]}static from(t){return new i(t)}static _normalize(t){if("function"==typeof t[Symbol.asyncIterator])return t;if("function"==typeof t[Symbol.iterator])return async function*(){for(const e of t)yield e}();throw new TypeError("not (Async)Iterable")}_use(t){return this._pipeline.push(t),this}flattenPipeline(){const t=this._pipeline.reduceRight(((t,e)=>async function*(r){yield*e(t(r))}),(async function*(t){yield*t})),e=new this.constructor([]);return e._iter=this._iter,e._pipeline=[t],e}toFunction(){const t=this.flattenPipeline()._pipeline[0];return e=>t(e)}map(t){return this._use((async function*(e){for await(const r of e)yield await t(r)}))}filter(t){return this._use((async function*(e){for await(const r of e)await t(r)&&(yield r)}))}flatMap(t){return this._use((async function*(e){for await(const r of e){const e=await t(r);for await(const t of i._normalize(e))yield t}}))}distinct(t=t=>t){return this._use((async function*(e){const r=new Set;for await(const s of e){const e=await t(s);r.has(e)||(r.add(e),yield s)}}))}limit(t){return this._use((async function*(e){let r=0;for await(const s of e){if(!(r++<t))break;yield s}}))}skip(t){return this._use((async function*(e){let r=0;for await(const s of e)r++>=t&&(yield s)}))}[Symbol.asyncIterator](){let t=this._iter;for(const e of this._pipeline)t=e(t);return t[Symbol.asyncIterator]()}async forEach(t){for await(const e of this)await t(e)}async toArray(){const t=[];for await(const e of this)t.push(e);return t}async reduce(t,e){let r=e;for await(const e of this)r=await t(r,e);return r}count(){return this.reduce((t=>t+1),0)}toLazy(){return new Promise((async t=>{const e=[];for await(const t of this)e.push(t);t(new n(e))}))}}e.exports=i},{"./Stream.js":18,"./StreamInterface.js":19}],16:[function(t,e,r){const s=t("./Stream.js");e.exports=class extends s{constructor(t){super(t),this.mapToEntry=void 0}keys(){return this._convertToX(s).map((([t,e])=>t))}values(){return this._convertToX(s).map((([t,e])=>e))}mapKeys(t){return this.map((([e,r])=>[t(e),r]))}mapValues(t){return this.map((([e,r])=>[e,t(r)]))}}},{"./Stream.js":18}],17:[function(t,e,r){const s=t("./Stream.js");e.exports=class extends s{constructor(t){super(t),this.mapToNumber=void 0}sum(){let t=0;for(const e of this)t+=e;return t}average(){let t=0,e=0;for(const r of this)t+=r,e++;return 0===e?NaN:t/e}min(){let t=1/0;for(const e of this)e<t&&(t=e);return t===1/0?void 0:t}max(){let t=-1/0;for(const e of this)e>t&&(t=e);return t===-1/0?void 0:t}}},{"./Stream.js":18}],18:[function(t,e,r){const s=t("./StreamInterface.js");let n,i,o,a;class c extends s{constructor(e){super(),this._iter=e[Symbol.iterator](),this._pipeline=[],n||(n=t("./NumberStream.js"),i=t("./StringStream.js"),o=t("./EntryStream.js"),a=t("./AsyncStream.js"))}static from(t){return new this(t)}_use(t){return this._pipeline.push(t),this}_convertToX(t,e){const r=new t([]);return r._iter=this._iter,r._pipeline=[...this._pipeline],e&&r._pipeline.push(e),r}flattenPipeline(){const t=this._pipeline.reduceRight(((t,e)=>function*(r){yield*e(t(r))}),(t=>t)),e=new this.constructor([]);return e._iter=this._iter,e._pipeline=[t],e}toFunction(){const t=this.flattenPipeline()._pipeline[0];return e=>t(e)}map(t){return this._use((function*(e){for(const r of e)yield t(r)}))}filter(t){return this._use((function*(e){for(const r of e)t(r)&&(yield r)}))}flatMap(t){return this._use((function*(e){for(const r of e){const e=t(r);yield*e instanceof s?e:e[Symbol.iterator]()}}))}distinct(){return this._use((function*(t){const e=new Set;for(const r of t){const t=JSON.stringify(r);e.has(t)||(e.add(t),yield r)}}))}sorted(t=(t,e)=>t>e?1:t<e?-1:0){return this._use((function*(e){const r=[...e].sort(t);yield*r}))}peek(t){return this._use((function*(e){for(const r of e)t(r),yield r}))}limit(t){return this._use((function*(e){let r=0;for(const s of e){if(r++>=t)break;yield s}}))}skip(t){return this._use((function*(e){let r=0;for(const s of e)r++<t||(yield s)}))}chunk(t){return this._use((function*(e){let r=[];for(const s of e)r.push(s),r.length===t&&(yield r,r=[]);r.length&&(yield r)}))}windowed(t,e=t){return this._use((function*(r){const s=[];for(const n of r)s.push(n),s.length===t&&(yield s.slice(),s.splice(0,e))}))}[Symbol.iterator](){return this._pipeline.reduce(((t,e)=>e(t)),this._iter)}[Symbol.asyncIterator](){let t=this._pipeline.reduce(((t,e)=>e(t)),this._iter);return{next:async()=>Promise.resolve(t.next())}}forEach(t){for(const e of this)t(e)}toArray(){return Array.from(this)}reduce(t,e){let r=e;for(const e of this)r=t(r,e);return r}count(){let t=0;for(const e of this)t++;return t}anyMatch(t){for(const e of this)if(t(e))return!0;return!1}allMatch(t){for(const e of this)if(!t(e))return!1;return!0}noneMatch(t){for(const e of this)if(t(e))return!1;return!0}findFirst(){for(const t of this)return t}findAny(){return this.findFirst()}collectWith(t){return t(this)}mapToNumber(t){return this._convertToX(n,(function*(e){for(const r of e){const e=t(r);if("number"!=typeof e)throw new TypeError("mapToNumber() must return number. Got "+typeof e);yield e}}))}mapToString(t){return this._convertToX(i,(function*(e){for(const r of e){const e=t(r);if("string"!=typeof e)throw new TypeError("mapToString() must return string. Got "+typeof e);yield e}}))}mapToEntry(t){return this._convertToX(o,(function*(e){for(const r of e){const e=t(r);if(!Array.isArray(e)||2!==e.length)throw new TypeError(`mapToEntry() must return [key, value] pair. Got: ${e}`);yield e}}))}mapToAsync(t){const e=this.flattenPipeline(),r=e._pipeline[0](e._iter),s=async function*(){for(const e of r)yield await t(e)}();return new a(s)}}e.exports=c},{"./AsyncStream.js":15,"./EntryStream.js":16,"./NumberStream.js":17,"./StreamInterface.js":19,"./StringStream.js":20}],19:[function(t,e,r){const s=t("../../libs/sys/JavaLibraryScriptCore.js");class n extends s{static methodTypes={map:{args:[Function],returns:n},filter:{args:[Function],returns:n},flatMap:{args:[Function],returns:n},forEach:{args:[[Function,Promise]],returns:[void 0,Promise]}};constructor(){if(super(),new.target===n)throw new TypeError("Cannot instantiate abstract class StreamInterface")}}e.exports=n},{"../../libs/sys/JavaLibraryScriptCore.js":7}],20:[function(t,e,r){const s=t("./Stream.js");e.exports=class extends s{constructor(t){super(t),this.mapToString=void 0}join(t=""){return Array.from(this).join(t)}concatAll(){return this.join("")}longest(){let t="";for(const e of this){if("string"!=typeof e)throw new TypeError("All elements must be strings");e.length>t.length&&(t=e)}return t||void 0}shortest(){let t=null;for(const e of this){if("string"!=typeof e)throw new TypeError("All elements must be strings");(null===t||e.length<t.length)&&(t=e)}return t||void 0}}},{"./Stream.js":18}],21:[function(t,e,r){e.exports={AsyncStream:t("./AsyncStream.js"),EntryStream:t("./EntryStream.js"),NumberStream:t("./NumberStream.js"),Stream:t("./Stream.js"),StreamInterface:t("./StreamInterface.js"),StringStream:t("./StringStream.js")}},{"./AsyncStream.js":15,"./EntryStream.js":16,"./NumberStream.js":17,"./Stream.js":18,"./StreamInterface.js":19,"./StringStream.js":20}]},{},[9]);
//# sourceMappingURL=JavaLibraryScript.min.js.map